
import matplotlib.pyplot as plt

print("hi")
axis = [*range(1,129)]

libcukoo1_1_tot = [415368,670304,941978,1297022,1511066,1651390,1917406,2135944,2383970,2635774,2842452,3047978,3381828,3594828,3839658,4044050,4371374,4657814,4826886,5129312,5408618,5638222,5758652,6142124,6454776,6496090,6831024,6958552,7317962,7514248,7738524,8108966,8280924,8502524,8834280,9128372,9483942,9655370,9818634,10055616,10506086,10666020,10877860,11109012,11387010,11580962,11816740,12070622,12326606,12630020,12763036,13286382,13314958,13437392,13833308,14015484,14684452,14998468,15076614,15351914,15643768,15620270,15940590,16203000,16261120,16695282,16870504,16981654,17410726,17361576,17775396,18065374,18246624,18588400,18021532,17766250,19096356,18455286,18399270,18247230,19993140,20160704,19285186,20376578,20351272,20490126,20832914,20610706,21122610,15040174,17733202,22192450,22026884,22712210,13970308,23117282,22413980,23312264,22974490,23448266,23814464,21785704,18368670,24048758,24116846,24390802,23412632,21637230,23229214,24881150,23504378,22479708,24386122,21556390,25242984,25520632,24978950,19736176,23819570,23714690,20502816,22099678,25605266,21332812,20979020,21013414,21624266,20318922]
STD_1_1_tot = [2041716,1806164,1613920,1675836,1501778,1443918,1361954,1368330,1332154,1287134,1204474,1151776,1092806,1122322,1086576,1113680,1507280,1487132,1567764,1671350,1553092,1690058,1640112,1611954,1762184,1729382,1687462,1726234,1647518,1644748,1646842,1555000,1648564,1679316,1606512,1627342,1626838,1646256,1645616,1653066,1620072,1700774,1692172,1674036,1679266,1738922,1630124,1683214,1655326,1703262,1774388,1553672,1698040,1613706,1681706,1642352,1543238,1602502,1395120,1551022,1541546,1557190,1414356,1317654,1243166,1138546,455120,339706,265884,435364,265124,282932,131506,246256,136690,186236,139168,116412,131636,131528,92636,71680,77380,136628,77810,84912,71818,67844,59918,57586,60670,58640,61326,79160,58010,55602,53614,55248,86590,55164,49254,53058,47456,49938,60018,87176,47442,45812,45822,43724,46324,83564,70176,79920,42222,47966,62190,57596,61582,55408,53532,56846,52274,46154,38318,87028,36512,41336]
WFEXT_1_1_tot = [35408,56030,84252,110242,137848,170434,185758,217184,243108,267640,276224,287426,299320,299118,301100,298410,300272,299530,299356,301878,312646,313562,319918,320032,322582,325714,325336,324920,328656,322142,323146,325332,326414,327840,329838,332158,331456,330726,331138,331736,329484,329418,331748,331150,332654,332102,328950,330504,331006,329170,335886,335108,335138,336140,338638,338158,335804,333172,336646,335936,337334,335862,339744,337538,345172,342736,349146,340470,342128,348086,345870,350654,351878,344690,365340,348272,346450,354638,351584,352662,355316,350826,349930,362626,355658,370804,362416,365080,359654,364796,367252,361986,370840,365568,384324,371700,377058,381396,401764,394074,400622,405726,399402,408732,410612,404554,421042,411502,413286,413820,419868,420236,426150,431696,428106,449728,429334,434308,447972,469886,462068,462018,462030,479870,476212,483712,469454,484892]

libcukoo1_9_tot = [801194,1283938,1971575,2522070,2963543,3457553,4002075,4502074,5073033,5596283,6122847,6703228,7271714,7994952,8456698,8811331,9631880,10052755,10813170,11203371,11804042,12296710,12593457,13010410,14002753,14585633,15063054,15695288,16014354,16653855,16813973,17835962,18302765,18618414,19201617,19712596,20248813,20570958,21106403,21313106,22319333,22061853,23275511,23728765,24314147,24684105,24800810,25532860,25908810,26722044,27180331,26937394,27679723,28233402,28302653,29346195,29599348,30076676,30473350,30829022,31227254,31783552,32299148,31946342,32160928,32485241,26545396,33013365,33060381,32292317,32974275,31571523,29315214,33305461,33623640,33860773,33277121,33901836,32554395,33606122,31546495,33093298,34086625,33119580,33385830,33666771,32112220,33959455,32567583,33530636,34661311,33958185,34211832,34546604,32081342,34541458,32464498,34918260,33663046,33204184,33966958,34981381,33746378,35413868,27412600,34751332,33863041,31697020,31543030,34108592,31909373,34290087,32242597,32253554,32504898,31489586,31747006,32128030,32947580,32124201,32440205,35570553,25329142,34137297,28063691,33915243,30360843,30627473]
STD_1_9_tot = [2368878,2284751,1918913,1921878,1745226,1772016,1656675,1633400,1613800,1583593,1523928,1486012,1483257,1429754,1356620,1324736,1624520,1902677,1838451,1789207,1713945,1933510,1799223,1742880,1908910,1834654,1901693,1902837,1871092,1883901,1860094,1829548,1863407,1800483,1842621,1834505,1832006,1822696,1828333,1837724,1846530,1816563,1814382,1826866,1829214,1824943,1841890,1816024,1843370,1823146,1836074,1830610,1836175,1843897,1779716,1847140,1811592,1820965,1848291,1868541,1836627,1849267,1785346,1664590,1633558,958794,921696,1552097,1318682,706900,358755,840237,310781,454096,384191,353504,238881,185846,196576,213228,150645,137764,185390,177134,136515,161183,274172,227363,131146,104843,112211,109215,100913,115376,116255,104000,100805,104587,121110,94004,96732,93483,88870,108906,100101,99658,85564,88392,210996,101777,94006,91693,125881,90343,112393,89944,87017,170087,96858,87513,194944,102132,84517,176498,100534,217517,97582,95431]
WFEXT_1_9_tot = [163993,260396,385014,523477,617530,668908,644551,589902,579140,569840,566027,554653,551397,541170,538958,546797,543990,537570,538610,542947,543647,525350,532797,526231,526401,522510,527201,522104,530768,527407,528958,529725,530403,532156,525045,532751,534867,533067,529598,532677,535676,532896,533575,534138,532293,536854,531526,537735,540086,535824,538891,537361,537858,535533,539016,541736,534750,537191,534306,534201,539842,534956,535257,534856,537442,532987,528943,533331,523368,528335,529514,530378,531030,521468,517468,525386,522735,523317,517106,518825,514257,512242,502745,507448,506231,502042,509624,511866,499390,505832,502216,505167,493363,499372,504248,503537,509812,507272,504831,500653,493473,498121,500122,495947,497240,503264,505874,499132,495273,489245,496072,496862,489704,486753,493383,494370,485313,485408,490140,492928,499594,479920,500234,487476,495720,483604,496910,489580]

# 1:1 graphs

plt.plot(axis, STD_1_1_tot, 'g', label='std::unordered_map')
plt.plot(axis, WFEXT_1_1_tot, 'r', label='WFEXT')
plt.ylabel('throughput (operations per second)')
plt.xlabel('number of threads')
plt.title('1:1 insert-lookup ratio')
plt.legend()
# plt.show()
plt.savefig('C:\\Users\\alonl\\Desktop\\1_1_ratio_std.jpg')
plt.clf()

plt.plot(axis, libcukoo1_1_tot, 'b', label='libcukoo')
plt.plot(axis, WFEXT_1_1_tot, 'r', label='WFEXT')
plt.ylabel('throughput (operations per second)')
plt.xlabel('number of threads')
plt.title('1:1 insert-lookup ratio')
plt.legend()
# plt.show()
plt.savefig('C:\\Users\\alonl\\Desktop\\1_1_ratio_cukoo.jpg')
plt.clf()

plt.plot(axis, STD_1_1_tot, 'g', label='std::unordered_map')
plt.plot(axis, libcukoo1_1_tot, 'b', label='libcukoo')
plt.plot(axis, WFEXT_1_1_tot, 'r', label='WFEXT')
plt.ylabel('throughput (operations per second)')
plt.xlabel('number of threads')
plt.title('1:1 insert-lookup ratio')
plt.legend()
# plt.show()
plt.savefig('C:\\Users\\alonl\\Desktop\\1_1_ratio_all.jpg')
plt.clf()




# 1:9 graphs

plt.plot(axis, STD_1_9_tot, 'g', label='std::unordered_map')
plt.plot(axis, WFEXT_1_9_tot, 'r', label='WFEXT')
plt.ylabel('throughput (operations per second)')
plt.xlabel('number of threads')
plt.title('1:9 insert-lookup ratio')
plt.legend()
# plt.show()
plt.savefig('C:\\Users\\alonl\\Desktop\\1_9_ratio_std.jpg')
plt.clf()

plt.plot(axis, libcukoo1_9_tot, 'b', label='libcukoo')
plt.plot(axis, WFEXT_1_9_tot, 'r', label='WFEXT')
plt.ylabel('throughput (operations per second)')
plt.xlabel('number of threads')
plt.title('1:9 insert-lookup ratio')
plt.legend()
# plt.show()
plt.savefig('C:\\Users\\alonl\\Desktop\\1_9_ratio_cukoo.jpg')
plt.clf()

plt.plot(axis, STD_1_9_tot, 'g', label='std::unordered_map')
plt.plot(axis, libcukoo1_9_tot, 'b', label='libcukoo')
plt.plot(axis, WFEXT_1_9_tot, 'r', label='WFEXT')
plt.ylabel('throughput (operations per second)')
plt.xlabel('number of threads')
plt.title('1:9 insert-lookup ratio')
plt.legend()
# plt.show()
plt.savefig('C:\\Users\\alonl\\Desktop\\1_9_ratio_all.jpg')
plt.clf()
